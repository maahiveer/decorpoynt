# Supabase Admin Panel Setup Guide

Follow these steps to implement a complete admin panel for managing blog articles using Next.js and Supabase.

---

## Step 1: Initialize Supabase Project
1. Go to [supabase.com](https://supabase.com) and sign in.
2. Create a **New Project**.
3. Once the project is ready, go to **Project Settings > API**.
4. Copy your `Project URL` and `anon public key`.

## Step 2: Database Schema Setup
Open the **SQL Editor** in your Supabase dashboard and run the following script:

```sql
-- Create articles table
CREATE TABLE articles (
  id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
  title TEXT NOT NULL,
  slug TEXT UNIQUE NOT NULL,
  content TEXT,
  status TEXT DEFAULT 'draft',
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Enable RLS
ALTER TABLE articles ENABLE ROW LEVEL SECURITY;

-- Policies
CREATE POLICY "Allow public read" ON articles FOR SELECT USING (true);
CREATE POLICY "Allow admin manage" ON articles FOR ALL TO authenticated USING (true);
```

## Step 3: Configure Environment Variables
Create a `.env.local` file in the root of your Next.js project:

```env
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
```

## Step 4: Create Supabase Client
In `lib/supabase.ts`, initialize the client:

```typescript
import { createClient } from '@supabase/supabase-js'

export const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL!,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
)
```

## Step 5: Implement Auth Provider
Create a context to manage user sessions globally.

```tsx
'use client'
import { createContext, useContext, useEffect, useState } from 'react'
import { supabase } from '@/lib/supabase'

export function AuthProvider({ children }) {
  const [user, setUser] = useState(null)

  useEffect(() => {
    supabase.auth.getSession().then(({ data: { session } }) => {
      setUser(session?.user ?? null)
    })
    
    const { data: { subscription } } = supabase.auth.onAuthStateChange((_event, session) => {
      setUser(session?.user ?? null)
    })
    return () => subscription.unsubscribe()
  }, [])

  return (
    <AuthContext.Provider value={{ user }}>
      {children}
    </AuthContext.Provider>
  )
}
```

## Step 6: Build Admin Article List
Fetch and display your data in a table:

```tsx
async function fetchArticles() {
  const { data, error } = await supabase
    .from('articles')
    .select('*')
    .order('created_at', { ascending: false })
    
  if (data) setArticles(data)
}
```

---
*Generated by Antigravity AI*
